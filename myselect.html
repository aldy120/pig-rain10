<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
  <script src="public/data/pig-area.js"></script>
  <script src="public/data/pig-city.js"></script>
  <script src="public/data/pig-county.js"></script>
  <script src="public/data/pig-stop.js"></script>
  <script src="public/data/pig-timespan.js"></script>
</head>

<body>
  <select name="city" id="city">
    <option value="123">456</option>
  </select>
  <select name="county" id="county">
    <option value="234">234</option>
  </select>
  <select name="stop" id="stop">
    <option value="345">345</option>
  </select>
  <script>
    const city = document.querySelector('#city');
    for (let area in pigCity) {
      let option = document.createElement('option');
      option.text = pigCity[area];
      option.setAttribute('value', area);
      city.add(option);
    }

    city.addEventListener('change', function () {
      while (county.firstChild) {
        county.removeChild(county.firstChild);
      }
      const citySelected = city.value;
      const countyFiltered = pigCounty[citySelected];
      for (let area in countyFiltered) {
        let option = document.createElement('option');
        option.text = countyFiltered[area];
        option.setAttribute('value', area);
        county.add(option);
      }
    });
    const county = document.querySelector('#county');
    const stop = document.querySelector('#stop');

    county.addEventListener('change', function () {
      while (stop.firstChild) {
        stop.removeChild(stop.firstChild);
      }
      const stopFiltered = pigStop[county.value];
      for (let area in stopFiltered) {
        let option = document.createElement('option');
        option.text = stopFiltered[area].addr;
        option.setAttribute('value', area);
        stop.add(option);
      }
    });
  </script>
</body>

</html>